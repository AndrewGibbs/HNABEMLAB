function [H,Hosc,Hnonosc] = besselhDecomp(NU,K,Z)
%similar to besselh.m, except decomposes Hankel function into oscillatory
%and non-oscillatory components, useful for oscillatory quadrature.

    if NU ~=1
        error('Only first kind Hankel so far please');
    end
    
    threshSmallMed = 500;
    threshMedLarge = 1000;
    smallInds = find(abs(Z)<threshSmallMed);
    medInds = find(abs(Z)>=threshSmallMed && abs(Z)<threshMedLarge);
    largeInds = find(abs(Z)>=threshMedLarge);
    
    if ~isempty(smallInds)
        Hsmall = besselh(NU,K,Z(smallInds));
        Hsmall
    end
    if ~isempty(medInds)
        
    end
    if ~isempty(largeInds)
        
    end
end